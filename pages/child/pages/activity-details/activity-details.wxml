<import src="../../../../utils/wxParse/wxParse.wxml" />
<view class="container">
  <!--商品图片-->
  <view class='shops-img'>
    <swiper style="width:{{windowWidth}}px;height:{{windowWidth}}px;" indicator-dots="{{indicatorDots}}" autoplay="{{autoplay}}" interval="{{interval}}" duration="{{duration}}" circular="{{circular}}">
      <block wx:for="{{imglist}}">
        <swiper-item>
          <image mode="aspectFill" src='{{item.imgPath}}' data-src="{{item.imgPath}}" class='slide-img' catchtap="previewImg" />
        </swiper-item>
      </block>
    </swiper>
  </view>
  <!-- 活动展示 -->
  <view class="act-head">
    <view class="li-span">
      <view class="li-span-icon">
        <image src="{{acturl}}" mode="aspectFit"></image>
      </view>
      <view class="li-span-show">
        <image src="../images/hdxqy_hot.png" mode="aspectFit"></image>
        {{activityDetailBean.status}}
      </view>
    </view>
    <view class="li-span">
      <view class="li-span-title">活动结束时间:{{activityDetailBean.endDate}}</view>
      <view class="li-span-val">{{activityType != '3'? '已有' + activityDetailBean.joinNum+'人'+activityTitle : '已有' +activityDetailBean.joinNum + '人代言此商品'}}</view>
    </view>
  </view>

  <view class='shops-head'>
    <!--商品说明-->
    <view class='head-box'>
      <view class='hesd-title'>{{goodsBean.goodsName}} </view>
      <view class='head-mini-title'>
        <text>月销{{goodsBean.monthSaleNum}}</text>
        <!-- <text>{{goodsBean.address}}</text> -->
        <text>快递:{{goodsBean.deliveryType}}</text>
        <text>限购一份</text>
      </view>
      <!--判断是否是活动显示活动标志-->
      <view class='activity-logo' wx:if="{{activityType!='3'}}">
        <!-- <image mode='aspectFit' src='../images/price_tag.png'></image> -->
        <text class="joinPersonNum" wx:if="{{activityType == '1' || activityType == '4' || activityType == '5'}}">{{activityDetailBean.joinPersonNum}}人{{activityTypeName}}</text>
        <text class="activityTypeName" wx:else>{{activityTypeName}}价</text>
      </view>
      <!-- end -->
      <view class='head-money'>￥{{actPrice}}</view>
      <view class="head-commission" wx:if="{{activityType=='3'}}">代言佣金:￥{{activityDetailBean.commission}}</view>
      <view wx:if="{{activityType!='3' && activityType!='2'}}" class='noMoney'>￥{{activityDetailBean.price}}</view>
      <view wx:if="{{activityType ==='2'}}" class='noMoney'>￥{{goodsBean.price}}</view>
      <view class='head-select' bindtap='handleSelect' wx:if="{{specList.length != 0}}">选择
        <text>请选择</text>
        <text>{{selName}}</text>
        <image src='../images/index_arrows.png'></image>
      </view>
    </view>
  </view>
  <!-- 发货时间/售后 -->
  <view class="shops-head" wx:if="{{activityType != '2'}}">
    <view class="li-span">
      <view class="li-span-title span-item">承诺发货时间</view>
      <view class="li-span-val span-val">{{goodsBean.deliveryTime}}</view>
    </view>
    <view class="li-span">
      <view class="li-span-title span-item">售后期限</view>
      <view class="li-span-val span-val">{{goodsBean.afterSaleTime}}</view>
    </view>
  </view>
  <!-- 礼包商品 -->
  <view class="shops-head" wx:if="{{activityType == '2'}}">
    <view class='like-title'>
      礼包包含的商品
    </view>
    <view class='like-ul'>
      <view class='like-features' wx:for="{{giftGoodsList}}" catchtap="toGiftDetail" data-goodsno="{{item.goodsNo}}">
        <view class='li-img'>
          <image src='{{item.imgPath}}'></image>
        </view>
        <view class='li-title'>{{item.goodsName}}</view>
        <view class='li-money'>￥{{item.price}}</view>
        <view class="li-span-num">x{{item.num}}</view>
      </view>
    </view>
  </view>
  <!--猜你喜欢-->
  <view class='shops-head'>
    <view class='like-title'>
      猜你喜欢
    </view>
    <view class='like-ul'>
      <view class='like-features' wx:for="{{footPrintGoodsList}}" catchtap="handleActDetail" data-goodsNo="{{item.goodsNo}}">
        <view class='li-img'>
          <image mode="aspectFill" src='{{item.imgPath}}'></image>
        </view>
        <view class='li-title'>{{item.goodsName}}</view>
        <view class='li-money'>￥{{item.price}}</view>
      </view>
    </view>
  </view>
  <!--商品评价-->
  <view class='shops-head' wx:if="{{activityType!= '2'}}">
    <view class='head-box'>
      <view class='eva-head'>
        <view class='evaluate'>
          <text class='eva-pro'>产品评价</text>
          <text class='eva-num'>(好评率{{activityDetailBean.goodScoreRate || 100}}%)</text>
        </view>
        <view class='eva-all' bindtap="checkEva">
          {{allEvaNum}}条评论
          <image src='../images/index_arrows.png'></image>
        </view>
      </view>
      <block wx:for="{{gradelist}}" wx:if="{{gradelist.length !=0 }}">
        <view class='use-list'>
          <view class='user-img'>
            <image src='{{item.userHead}}'></image>
          </view>
          <view class='user-box'>
            <view class='user-name'>{{item.nickName}}</view>
            <view class='user-title'>{{item.content}}</view>
          </view>
          <view class='user-time'>{{item.createDate}}</view>
        </view>
      </block>
      <view wx:if="{{gradelist.length ==0}}" class="noeva">该商品还没有评价!</view>
    </view>
  </view>
  <!--商品店铺-->
  <view class='shops-head' wx:if="{{activityType!= '2'}}" bindtap='handleShop'>
    <view class='head-box'>
      <view class='shop-img'>
        <image mode="aspectFit" src='{{netShopInfo.headImg}}'></image>
      </view>
      <view class='shop-content'>
        <view class='shop-content-title'>{{netShopInfo.shopName}}</view>
        <view class='shop-content-star'>
          <block wx:for="{{one_1}}" wx:key="item">
            <image src='../images/star1.png'></image>
          </block>
          <block wx:for="{{tow_1}}" wx:key="item">
            <image src='../images/star2.png'></image>
          </block>
          <!-- {{netShopInfo.attentionPersonNum}}关注 -->
        </view>
        <view class='shop-content-intro'>{{netShopInfo.shopDesc}}</view>
        <view class='shop-content-img'>
          <image src='../images/management_site.png'></image>
        </view>
      </view>
    </view>
  </view>
  <!--商铺详情-->
  <view class='shopDetails'>
    <view class='shopDetails-title'> 商品详情</view>
    <view class="imglist-h5">
    <template is="wxParse" data="{{wxParseData:detailh5.nodes}}" />
      <!-- <image  wx:for="{{detailh5}}" data-src="{{item.imgPath}}"  mode="widthFix" src="{{item.imgPath}}"  catchtap="imgDetails" ></image> -->
        <!-- 到底提示 -->
    <view class="bottom-title">
      <view> 已经全部加载完了~ </view>
    </view>

    </view>
  </view>
</view>
<!-- 活动商品结算显示-->
<!-- 如果是助力购或接龙活动 显示活动介绍 -->
<view class='pay activity-pay'>
  <!-- <view wx:if="{{activityDetailBean.activityType === '1' || activityDetailBean.activityType === '4'}}" catchtap='toIntrodeuce' class='recommend'>
    <image mode='aspectFit' src='../images/activity-js.png'></image>
    活动介绍
  </view> -->
    <view class='pay-left'>
    <view class='navto' bindtap='handleShop'>
      <image src='../images/store_entrance.png'></image>
      店铺
    </view>
    <view class='navto'>
      <button open-type='share'>
        <image src="../images/fenxiang.png"></image>
        分享
      </button>
    </view>
    <view class='navto' bindtap='tocart'>
      <image src='../images/shopping_entrance.png'></image>
      购物车
      <view class="{{cartNum != 0 ? 'cartNum' :''}}">{{cartNum != 0 ? cartNum :''}}</view>
    </view>
  </view>
  <view class='activity-title' bindtap='handlePay'>
    <block wx:if="{{activityDetailBean.activityType === '1'}}">
      <view>￥{{actPrice}}</view>
      <view>我要{{activityTypeName}}</view>
    </block>
    <block wx:if="{{activityDetailBean.activityType === '5'}}">
      <view>￥{{actPrice}}</view>
      <view>我要{{activityTypeName}}</view>
    </block>
    <block wx:if="{{activityDetailBean.activityType === '4'}}">
      <view class="jielong">我要{{activityTypeName}}</view>
    </block>
    <block wx:if="{{activityType == '2' || activityType === '3' }}">
      <view class="jielong">{{activityType === '3' ? '我要代言' : '立即购买'}}</view>
    </block>
  </view>
</view>

<!--弹出层 商品详情选择-->
<view class='mask-layer' wx:if="{{showPop}}" bindtap='hideModal'></view>
<view class='pop-add-cart pop-common' wx:if="{{showPop}}" animation='{{animationData}}'>
  <view class='spinfo'>
    <view class='spinfo-img'>
      <!-- <image mode='scaleToFill' src='{{imglist[0].imgPath}}'></image> -->
      <image mode='scaleToFill' src='{{includeGroup[0].makeBeanList[0].specImg}}' bindtap="handleShowImg"></image>
    </view>
    <view class='spinfo-content'>
      <view class='money' wx:if="{{activityType == '2'  || activityType == '3'}}">￥{{selectPrice}}</view>
      <view class='money' wx:else>￥{{actmoney}} </view>
      <view class='selected_size' wx:if="{{specValue}}">已选规格:{{selValue}}</view>
      <view class='selected_size' wx:else>请选择:{{selName}}</view>
      <view class='spnoNum'>
        <text>库存:{{includeGroup[0].num == null ? '999+' : includeGroup[0].num }}</text>
        <!-- <text>商品编码:{{imglist[0].merchantNo}}</text> -->
      </view>
    </view>
    <view class='spinfo-delete' bindtap='handleHide'>
      <image mode='aspectFit' src='../images/cha.png'></image>
    </view>
  </view>
  <view class='spinfo-size'>
    <scroll-view style='height:255px' scroll-y="true">
      <view class="commodity_attr_list">
        <!--每组属性-->
        <view class="attr_box" wx:for="{{specList}}" wx:for-item="attrValueObj" wx:for-index="attrIndex">
          <!--属性名-->
          <view class="attr_name">{{attrValueObj.specName}}</view>
          <!--属性值-->
          <view class="attr_value_box">
            <!--每个属性值-->
            <view class="attr_value {{attrIndex==firstIndex || attrValueObj.attrValueStatus[valueIndex]?(item.specValue==attrValueObj.selectedValue?'attr_value_active':''):'attr_value_disabled'}}" bindtap="selectAttrValue" data-key="{{attrValueObj.specName}}" data-index="{{attrIndex}}"
              wx:for="{{attrValueObj.specAttrList}}" data-status="{{attrValueObj.attrValueStatus[valueIndex]}}" data-selectedvalue="{{attrValueObj.selectedValue}}" data-value="{{item.specValue}}" wx:for-index="valueIndex">{{item.specValue}}</view>
          </view>
        </view>
      </view>
      <!-- <view class="selectCount">
        <view class="countname">数量</view>
        <view class="countright">
          <text class="{{minusStatus}}" bindtap="bindMinus">-</text>
          <input type='number' bindchange="bindManual" value='{{num}}'></input>
          <text class="normal" bindtap="bindPlus">+</text>
        </view>
      </view> -->
    </scroll-view>
  </view>
  <view class='showFooter toolbar'>
    <view class='footer-color' bindtap="achieveSelect">选好了</view>
  </view>
</view>
<!-- 弹出分享按钮 -->
<share id="dialog" showDialog="{{showDialog}}"></share>
<logins id="logins" bind:callSomeFun="callSomeFun"></logins>